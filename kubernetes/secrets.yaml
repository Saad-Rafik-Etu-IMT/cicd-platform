# ========================================
# Secrets pour la plateforme CI/CD
# ========================================
# IMPORTANT: En production, utilisez des outils comme:
# - Kubernetes Secrets avec encryption at rest
# - HashiCorp Vault
# - Azure Key Vault / AWS Secrets Manager
# - Sealed Secrets
# ========================================
apiVersion: v1
kind: Secret
metadata:
  name: cicd-backend-secrets
  namespace: cicd-platform
  labels:
    app.kubernetes.io/name: cicd-backend
    app.kubernetes.io/component: backend
type: Opaque
stringData:
  POSTGRES_USER: "cicd_user"
  POSTGRES_PASSWORD: "NrzZKF3piQ02oXkWcIP1Gdum"
  JWT_SECRET: "B4eL76jJArfD8plOoP1XUiTCkgN5W0yhutcbZmqw9FHQxSsaI2KYMnGdv3VRzE"
  GITHUB_WEBHOOK_SECRET: "GvF7c54SDl6WydC8M2sOhgLQrAaYeHw3"
  # Configur√© via kubectl patch (ne pas commiter les vraies valeurs)
  GITHUB_CLIENT_ID: "CONFIGURE_VIA_KUBECTL"
  GITHUB_CLIENT_SECRET: "CONFIGURE_VIA_KUBECTL"
  SONAR_TOKEN: "CONFIGURE_VIA_KUBECTL"
  VM_HOST: "CONFIGURE_VIA_KUBECTL"
  VM_USER: "deployer"
---
apiVersion: v1
kind: Secret
metadata:
  name: cicd-postgres-secrets
  namespace: cicd-platform
  labels:
    app.kubernetes.io/name: postgres
    app.kubernetes.io/component: database
type: Opaque
stringData:
  POSTGRES_DB: "cicd_db"
  POSTGRES_USER: "cicd_user"
  POSTGRES_PASSWORD: "NrzZKF3piQ02oXkWcIP1Gdum"
---
apiVersion: v1
kind: Secret
metadata:
  name: sonarqube-db-secrets
  namespace: cicd-platform
  labels:
    app.kubernetes.io/name: sonarqube
    app.kubernetes.io/component: quality
type: Opaque
stringData:
  POSTGRES_DB: "sonarqube"
  POSTGRES_USER: "sonar"
  POSTGRES_PASSWORD: "7g4sljdKAre1ikpfL2C9zmcN"
  SONAR_JDBC_USERNAME: "sonar"
  SONAR_JDBC_PASSWORD: "7g4sljdKAre1ikpfL2C9zmcN"
