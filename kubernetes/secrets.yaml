# ========================================
# Secrets pour la plateforme CI/CD
# ========================================
# IMPORTANT: En production, utilisez des outils comme:
# - Kubernetes Secrets avec encryption at rest
# - HashiCorp Vault
# - Azure Key Vault / AWS Secrets Manager
# - Sealed Secrets
# ========================================
apiVersion: v1
kind: Secret
metadata:
  name: cicd-backend-secrets
  namespace: cicd-platform
  labels:
    app.kubernetes.io/name: cicd-backend
    app.kubernetes.io/component: backend
type: Opaque
stringData:
  POSTGRES_USER: "cicd_user"
  POSTGRES_PASSWORD: "cicd_pass"
  JWT_SECRET: "cicd-platform-jwt-secret-2024"
  GITHUB_WEBHOOK_SECRET: "your_webhook_secret"
  # Ã€ configurer en production
  GITHUB_CLIENT_ID: ""
  GITHUB_CLIENT_SECRET: ""
  SONAR_TOKEN: ""
  VM_HOST: "192.168.1.100"
  VM_USER: "deployer"
---
apiVersion: v1
kind: Secret
metadata:
  name: cicd-postgres-secrets
  namespace: cicd-platform
  labels:
    app.kubernetes.io/name: postgres
    app.kubernetes.io/component: database
type: Opaque
stringData:
  POSTGRES_DB: "cicd_db"
  POSTGRES_USER: "cicd_user"
  POSTGRES_PASSWORD: "cicd_pass"
---
apiVersion: v1
kind: Secret
metadata:
  name: sonarqube-db-secrets
  namespace: cicd-platform
  labels:
    app.kubernetes.io/name: sonarqube
    app.kubernetes.io/component: quality
type: Opaque
stringData:
  POSTGRES_DB: "sonarqube"
  POSTGRES_USER: "sonar"
  POSTGRES_PASSWORD: "sonar"
  SONAR_JDBC_USERNAME: "sonar"
  SONAR_JDBC_PASSWORD: "sonar"
